<html>
<head>
	<title>Драугхельм. Танвельд</title>
	<style>
		#InfoBlock{
			position: fixed;
			border: 2px solid;
			border-color: #4682B4;
			border-radius: 10px;
			
			background-color: white;
			
			color: darkgrey;
			padding: 10px;
			max-width: 280px;
			max-height: 400px;
			overflow-y: auto;
		}
		
		#InfoBlock p{
			font-size: .9em;
		}
		
		area{
			user-select: none;
			cursor: pointer;
		}
	</style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
	<div style="position: fixed;"><div style="background-color: white; border: 2px solid; padding-left: 20px; padding-right: 20px; border-radius: 10px"><b></b> <input id="mapScale" type="range" min="10" max="100" step="10" value="50" list="tickmarks" onchange="changeScale(value)" style="width: 100%;"></div>
	<datalist id="tickmarks">
		<option value="10" label="10%">
		<option value="20">
		<option value="30">
		<option value="40">
		<option value="50" label="50%">
		<option value="60">
		<option value="70">
		<option value="80">
		<option value="90">
		<option value="100" label="100%">
	</datalist>
	
	<div id='InfoBlock' style='border: 2px solid; border-color: black; background-color:white; display: none;'></div>
	</div>
	<div id="Map">
	<img id="navImage" style="user-select: none;" usemap="#Navigation" src='images/Tanveld2.png'>
	
	<!--использовать тег "map" для отрисовки карты с подсказками-->
	<map id="Navigation" name="Navigation">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Монастырь Ордена Короны" coords="846,342,928,330,947,262,954,180,971,176,964,143,891,136,804,138,823,225,828,274" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Лесопилка" coords="884,565,893,612,926,616,954,579,931,558" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Башня придворного волшебника" coords="1280,727,1320,762,1355,717,1313,682" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Дворец" coords="1156,546,1104,607,1104,621,1064,659,1090,738,1144,790,1221,799,1308,696,1275,663,1282,649,1217,591,1203,598" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Церковь Соцветия" coords="893,1481,910,1528,910,1582,891,1617,839,1598,809,1528,769,1495,788,1455,849,1488" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Мост в старый город" coords="1095,755,1135,790,1043,865,844,1043,821,1015,996,862" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Старый храм" coords="673,1162,710,1188,750,1151,708,1113" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Старый город" coords="363,1155,490,1132,612,1078,708,991,809,1021,837,1054,860,1134,853,1167,785,1253,750,1282,703,1307,677,1253,609,1228,527,1291,487,1232,347,1225" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Королевский дворец" coords="511,1303,610,1240,668,1261,701,1319,621,1392,574,1411,528,1408,509,1394" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Гарнизон нижнего города" coords="1955,837,1960,895,1988,923,2051,921,2108,898,2119,869,2119,809,2049,785,2016,766" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Ремесленный квартал" coords="1228,1336,1256,1294,1294,1257,1315,1191,1345,1135,1348,1053,1390,1006,1435,996,1491,926,1559,903,1610,917,1631,989,1716,1085,1706,1174,1615,1158,1531,1188,1461,1301,1444,1359,1334,1416,1271,1427" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Портовый квартал" coords="1461,1376,1557,1209,1627,1188,1728,1195,1735,1101,1822,1076,1840,1094,1852,1151,1850,1174,1897,1235,1894,1312,1918,1380,1775,1399,1742,1444,1667,1465,1608,1406,1524,1401" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Рыбацкий причал" coords="1756,1455,1791,1397,1915,1385,1953,1460,1831,1462,1803,1488" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Нижний город" coords="1629,912,1646,973,1730,1078,1815,1048,1880,1041,1955,1022,2082,991,2122,940,2110,898,2056,921,1993,923,1965,895,1958,837,2007,785,1986,738,1892,715,1787,755,1730,752,1719,834" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Фермы" coords="1869,1071,1885,1162,1923,1223,1932,1287,2162,1303,2246,1266,2295,1193,2342,1090,2323,942,2291,919,2216,949,2143,949,2110,1005,1976,1055" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Купеческий квартал" coords="1135,970,1259,973,1261,1080,1233,1186,1189,1270,1104,1308,1025,1385,954,1329,1003,1275,1025,1214,1088,1155,1090,1116,1137,1078" shape="poly">
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="Верхний город" coords="1053,877,1128,804,1221,806,1268,820,1362,722,1411,687,1484,745,1519,755,1526,799,1430,846,1362,926,1266,951,1137,951" shape="poly">
		
		<area nohref onmouseout="GetInfo()" onmouseover="GetInfo(alt)" alt="река Серпа" coords="385,108,392,302,373,370,373,441,382,485,363,572,317,663,258,727,232,785,232,923,274,1003,284,1029,309,1055,361,1069,544,1071,577,1045,605,1024,649,968,692,954,741,959,760,951,816,968,842,984,882,1029,891,1116,889,1165,872,1214,814,1259,771,1305,720,1359,645,1427,612,1493,598,1563,612,1676,649,1762,696,1814,762,1819,811,1823,910,1814,987,1788,1034,1753,1130,1669,1207,1641,1289,1641,1318,1622,1374,1617,1522,1636,1550,1671,1561,1706,1597,1739,1604,1779,1620,1816,1681,1854,1712,1821,1805,1783,1979,1805,2037,1833,2094,1889,2112,1933,2124,1985,2166,2013,2239,2058,2347,2098,2377,2151,2398,2203,2635,2196,2635,1912,2600,1837,2565,1730,2518,1619,2448,1551,2368,1519,2312,1451,2265,1394,2258,1333,2218,1303,2173,1329,2152,1366,2122,1387,2094,1399,2077,1430,1998,1467,1979,1486,1925,1448,1772,1458,1721,1488,1681,1512,1615,1483,1580,1448,1508,1439,1442,1411,1400,1434,1341,1458,1287,1505,1254,1519,1121,1537,1041,1587,987,1648,961,1687,893,1723,769,1725,724,1652,724,1566,748,1474,799,1397,858,1350,893,1291,940,1261,985,1181,1020,1155,1034,1097,1055,1062,1022,944,945,874,891,858,816,823,708,820,614,869,539,914,420,944,375,919,349,830,370,773,441,694,469,586,551,445,542,356,558,272,535,101" shape="poly">
	</map>
	</div>
	
	<script>
		let iWidth = 100;
		let iHeight = 100;
		
		<!-- $(document).ready(GetInfo(target)); -->
		$(document).ready(function(){
			iWidth = $('#navImage').prop('width');
			iHeight = $('#navImage').prop('height');
			console.log(iWidth+':'+iHeight);
			
			for(var a of $('#Navigation area')){
				{
					$(a).attr('data-coordsOld',$(a).prop('coords'));
				}
			}
			
			changeScale($('#mapScale').val())
		});
		
		function GetInfo(area){
			$('#InfoBlock').hide();
			if(area){
				var str = '<b>'+area+'</b>' + (infodata[area] ? '<p>'+infodata[area]+'</p>' : '');
				
				$('#InfoBlock').html(str);
				$('#InfoBlock').show();
			}
		}
		
		function changeScale(scale = 100){
			var tm_width = iWidth * scale/100
			
			$('#navImage').prop('width',tm_width);
			//$('#Navigation').prop('width',tm_width);
			
			for(var a of $('#Navigation area')){
				var tm_coords = $(a).attr('data-coordsOld').split(",");
				var new_coords = "";
				for(var c of tm_coords){
					new_coords = new_coords ? (new_coords + ',' + (c * scale/100)) : (c * scale/100);
					console.log(c + "\n"+(c * scale/100));
				}
				
				$(a).attr('coords',new_coords);
			}
		}
		
		var infodata = {
			"Монастырь Ордена Короны": "Рыцарский орден, некогда служивший королевской династии Блеменгем.<br>В настоящее время, они продолжают охранять территорию старого города от мародеров.",
			"Королевский дворец": "Дворец династии Блеменгем, расположенный на скалистом утесе.<br>По легенде был разрушен Драугхельмской Ведьмой.<br>В результате разрушения замка частично пострадала часть старого города.",
			"Дворец": "По-сути представляет собой перестроенную крепость, расположенную на восточном берегу.<br>В данный момент служит резиденцией действующего правительства королевства Драугхельм",
			"Мост в старый город": "Высокий каменный мост соединяет новую и старую части города",
			"Церковь Соцветия": "После распада древних империй, многие народы обратили свои молитвы к младшим богам и духам.<br>Тем не менее, Церковь Соцветия продолжает нести веру в старых богов, пользуясь благосклонностью аристократии.",
			"Старый город": "Улицы старого города почти не постарадали при разрушении королевского двоца, но опасаясь гнева драугхельмской ведьмы, горожане постепенно покинули западный берег оставив свои дома.",
			"Рыбацкий причал": "Извилистая горная река недостаточно глубока для больших судов, поэтому морское сообщение осуществляется через узкий рыбацкий причал.",
			"Башня придворного волшебника": "Высокая башня придворная волшебника - является его личной резиденцией. Здесь он проводит свои магические исследования.<br>Любой, кто желает получить разрешение на магические эксперименты, должен предварительно согласовать их с придворным волшебником Танвельда.",
		}
	</script>
</body>
</html>
